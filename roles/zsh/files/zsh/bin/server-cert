#!/bin/bash
# This will get the server certificate for a given host
# this takes the host as the first argument and the port as the second
# if the port is excluded then 443 is assumed

host=$1
port=${2:-443}

echo 'quit' | openssl s_client -certform PEM -connect ${host}:${port} 2>/dev/null | perl -ne 'print if /-----BEGIN CERTIFICATE-----/../-----END CERTIFICATE-----/'
# This needs to be able to catch the exception caused by an inability to complete the command

# vim: set ai et sw=4 syntax=sh :
